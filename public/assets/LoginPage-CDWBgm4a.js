import{g as h,K as z,L as C,b as B,M,N,a as j}from"./vendor-primevue-_kQtzldN.js";import{d as E,r as d,b as I,i as t,l as a,u as r,f as e,h as f,g as u,k as _,t as g,j as V,s as $,m as n}from"./vendor-vue-7xZ5dmFb.js";import{d as q}from"./app-actions-MIoyI-E5.js";import{h as A,o as R,s as v}from"./vendor-other-akJw3aOu.js";import{F as T}from"./index-BMjpvsoc.js";import"./vendor-icons-Bx-8nqXz.js";import"./vendor-pinia--L0FGc_G.js";import"./vendor-utils-CgaVvxla.js";import"./app-notifications-HUyJPUVc.js";import"./vendor-chart-DXz3feFU.js";const D={class:"flex items-center justify-center h-screen"},H={class:"flex items-center gap-4 pb-8 text-primary"},K={class:"flex flex-col gap-6 w-full"},P={class:"flex flex-col gap-2 w-full"},Q={class:"flex flex-col gap-2 w-full"},G={class:"flex flex-col gap-2 w-full"},oe=E({__name:"LoginPage",setup(J){const x=$(),w=q(),i=d(!1),c=d(""),b=A(R({email:v().min(1,{message:"L'email est requis."}).email("Format d'email invalide."),password:v().min(1,{message:"Le mot de passe est requis."})})),y=async o=>{if(o.valid){i.value=!0,c.value="";const s=await w.login({email:o.values.email||"",password:o.values.password||""});i.value=!1,s.success?x.push("/"):c.value=s.message||"Identifiants incorrects"}};return(o,s)=>{const k=B,m=C,p=M,S=V("font-awesome-icon"),F=j,L=h;return n(),I("div",D,[t(L,{class:"px-6 py-20 md:px-20 lg:px-80"},{title:a(()=>[e("div",H,[t(T,{size:"64"}),s[0]||(s[0]=e("div",{class:"flex flex-col justify-center leading-none"},[e("span",{class:"text-2xl font-bold text-color"},"FRAISSE & FILS"),e("span",{class:"text-xl text-primary font-bold tracking-wider"},"QHSE Manager")],-1))])]),content:a(()=>[t(r(z),{resolver:r(b),onSubmit:y},{default:a(l=>[e("div",K,[e("div",P,[t(m,{variant:"on"},{default:a(()=>[t(k,{name:"email",id:"email",type:"email",size:"large",class:"w-full",fluid:""}),s[1]||(s[1]=e("label",{for:"email"},"Email",-1))]),_:1}),l.email?.invalid?(n(),f(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:a(()=>[_(g(l.email.error.message),1)]),_:2},1024)):u("",!0)]),e("div",Q,[t(m,{variant:"on"},{default:a(()=>[t(r(N),{id:"password",name:"password",size:"large",toggleMask:!0,feedback:!1,"input-class":"w-full",fluid:""}),s[2]||(s[2]=e("label",{for:"password"},"Mot de passe",-1))]),_:1}),l.password?.invalid?(n(),f(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:a(()=>[_(g(l.password.error.message),1)]),_:2},1024)):u("",!0)]),e("div",G,[t(F,{label:"Connexion",type:"submit",size:"large",fluid:"",class:"w-full",loading:i.value},{icon:a(()=>[t(S,{icon:["fas","sign-in-alt"],class:"mr-2"})]),_:1},8,["loading"])])])]),_:1},8,["resolver"])]),_:1})])}}});export{oe as default};
