import{T as Xe}from"./index-C9vCuLi4.js";import{B as Ie,aj as le,c as v,o as p,A as y,a as o,p as _,t as b,L as Ye,R as qe,M as We,Z as W,ak as be,P as Qe,al as ge,am as Q,an as Je,aa as ye,a8 as re,ao as Ze,O as G,r as E,U as et,z as R,b as r,w as h,v as Se,m as T,ai as tt,ac as it,F as j,I as Z,l as z,e as J,d as nt,G as st,g as ot,H as at,h as L,i as de,j as lt,f as rt,q as dt,u as m,s as M,k as xe,x as Oe,y as ut}from"./index-oOuEsLBu.js";import{u as ct,s as ue}from"./index-CpmQ7Zn9.js";import{s as ke}from"./index-B3ik4ugR.js";import{b as we,s as pe}from"./index-IzGGsCUm.js";import{s as Y}from"./index-CO5Pw-j-.js";import{s as pt}from"./index-D25kfrV8.js";import{u as ft}from"./documents-BDxgjJlF.js";import{u as ht}from"./indicators-DW2GygZt.js";import{a as mt,s as vt,b as bt}from"./index-B0RCps1L.js";import{s as gt,a as yt}from"./index-kYhIjE44.js";var xt=`
    .p-knob-range {
        fill: none;
        transition: stroke 0.1s ease-in;
    }

    .p-knob-value {
        animation-name: p-knob-dash-frame;
        animation-fill-mode: forwards;
        fill: none;
    }

    .p-knob-text {
        font-size: 1.3rem;
        text-align: center;
    }

    .p-knob svg {
        border-radius: 50%;
        outline-color: transparent;
        transition:
            background dt('knob.transition.duration'),
            color dt('knob.transition.duration'),
            outline-color dt('knob.transition.duration'),
            box-shadow dt('knob.transition.duration');
    }

    .p-knob svg:focus-visible {
        box-shadow: dt('knob.focus.ring.shadow');
        outline: dt('knob.focus.ring.width') dt('knob.focus.ring.style') dt('knob.focus.ring.color');
        outline-offset: dt('knob.focus.ring.offset');
    }

    @keyframes p-knob-dash-frame {
        100% {
            stroke-dashoffset: 0;
        }
    }
`,Ot={root:function(e){var i=e.instance,s=e.props;return["p-knob p-component",{"p-disabled":s.disabled,"p-invalid":i.$invalid}]},range:"p-knob-range",value:"p-knob-value",text:"p-knob-text"},kt=Ie.extend({name:"knob",style:xt,classes:Ot}),It={name:"BaseKnob",extends:we,props:{size:{type:Number,default:100},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:function(){return le("knob.value.background").variable}},rangeColor:{type:String,default:function(){return le("knob.range.background").variable}},textColor:{type:String,default:function(){return le("knob.text.color").variable}},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:[String,Function],default:"{value}"},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:kt,provide:function(){return{$pcKnob:this,$parentInstance:this}}},N=3.14159265358979,Me={name:"Knob",extends:It,inheritAttrs:!1,emits:["change"],data:function(){return{radius:40,midX:50,midY:50,minRadians:4*N/3,maxRadians:-N/3}},methods:{updateValueByOffset:function(e,i){var s=e-this.size/2,l=this.size/2-i,n=Math.atan2(l,s),x=-N/2-N/6;this.updateModel(n,x)},updateModel:function(e,i){var s;if(e>this.maxRadians)s=this.mapRange(e,this.minRadians,this.maxRadians,this.min,this.max);else if(e<i)s=this.mapRange(e+2*N,this.minRadians,this.maxRadians,this.min,this.max);else return;var l=Math.round((s-this.min)/this.step)*this.step+this.min;this.writeValue(l),this.$emit("change",l)},updateModelValue:function(e){e>this.max?this.writeValue(this.max):e<this.min?this.writeValue(this.min):this.writeValue(e)},mapRange:function(e,i,s,l,n){return(e-i)*(n-l)/(s-i)+l},onClick:function(e){!this.disabled&&!this.readonly&&this.updateValueByOffset(e.offsetX,e.offsetY)},onBlur:function(e){var i,s;(i=(s=this.formField).onBlur)===null||i===void 0||i.call(s,e)},onMouseDown:function(e){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),e.preventDefault())},onMouseUp:function(e){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.preventDefault())},onTouchStart:function(e){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),e.preventDefault())},onTouchEnd:function(e){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.preventDefault())},onMouseMove:function(e){!this.disabled&&!this.readonly&&(this.updateValueByOffset(e.offsetX,e.offsetY),e.preventDefault())},onTouchMove:function(e){if(!this.disabled&&!this.readonly&&e.touches.length==1){var i=this.$el.getBoundingClientRect(),s=e.targetTouches.item(0),l=s.clientX-i.left,n=s.clientY-i.top;this.updateValueByOffset(l,n)}},onKeyDown:function(e){if(!this.disabled&&!this.readonly)switch(e.code){case"ArrowRight":case"ArrowUp":{e.preventDefault(),this.updateModelValue(this.d_value+this.step);break}case"ArrowLeft":case"ArrowDown":{e.preventDefault(),this.updateModelValue(this.d_value-this.step);break}case"Home":{e.preventDefault(),this.writeValue(this.min);break}case"End":{e.preventDefault(),this.writeValue(this.max);break}case"PageUp":{e.preventDefault(),this.updateModelValue(this.d_value+10);break}case"PageDown":{e.preventDefault(),this.updateModelValue(this.d_value-10);break}}}},computed:{rangePath:function(){return"M ".concat(this.minX," ").concat(this.minY," A ").concat(this.radius," ").concat(this.radius," 0 1 1 ").concat(this.maxX," ").concat(this.maxY)},valuePath:function(){return"M ".concat(this.zeroX," ").concat(this.zeroY," A ").concat(this.radius," ").concat(this.radius," 0 ").concat(this.largeArc," ").concat(this.sweep," ").concat(this.valueX," ").concat(this.valueY)},zeroRadians:function(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians:function(){return this.mapRange(this.d_value,this.min,this.max,this.minRadians,this.maxRadians)},minX:function(){return this.midX+Math.cos(this.minRadians)*this.radius},minY:function(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX:function(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY:function(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX:function(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY:function(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX:function(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY:function(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc:function(){return Math.abs(this.zeroRadians-this.valueRadians)<N?0:1},sweep:function(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay:function(){return typeof this.valueTemplate=="string"?this.valueTemplate.replace(/{value}/g,this.d_value):this.valueTemplate(this.d_value)}}},St=["width","height","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-labelledby","aria-label"],wt=["d","stroke-width","stroke"],Mt=["d","stroke-width","stroke"],Dt=["fill"];function Ft(t,e,i,s,l,n){return p(),v("div",y({class:t.cx("root")},t.ptmi("root")),[(p(),v("svg",y({viewBox:"0 0 100 100",role:"slider",width:t.size,height:t.size,tabindex:t.readonly||t.disabled?-1:t.tabindex,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.d_value,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onClick:e[0]||(e[0]=function(){return n.onClick&&n.onClick.apply(n,arguments)}),onBlur:e[1]||(e[1]=function(){return n.onBlur&&n.onBlur.apply(n,arguments)}),onKeydown:e[2]||(e[2]=function(){return n.onKeyDown&&n.onKeyDown.apply(n,arguments)}),onMousedown:e[3]||(e[3]=function(){return n.onMouseDown&&n.onMouseDown.apply(n,arguments)}),onMouseup:e[4]||(e[4]=function(){return n.onMouseUp&&n.onMouseUp.apply(n,arguments)}),onTouchstart:e[5]||(e[5]=function(){return n.onTouchStart&&n.onTouchStart.apply(n,arguments)}),onTouchend:e[6]||(e[6]=function(){return n.onTouchEnd&&n.onTouchEnd.apply(n,arguments)})},t.ptm("svg")),[o("path",y({d:n.rangePath,"stroke-width":t.strokeWidth,stroke:t.rangeColor,class:t.cx("range")},t.ptm("range")),null,16,wt),o("path",y({d:n.valuePath,"stroke-width":t.strokeWidth,stroke:t.valueColor,class:t.cx("value")},t.ptm("value")),null,16,Mt),t.showValue?(p(),v("text",y({key:0,x:50,y:57,"text-anchor":"middle",fill:t.textColor,class:t.cx("text")},t.ptm("text")),b(n.valueToDisplay),17,Dt)):_("",!0)],16,St))],16)}Me.render=Ft;var Lt=`
    .p-listbox {
        display: block;
        background: dt('listbox.background');
        color: dt('listbox.color');
        border: 1px solid dt('listbox.border.color');
        border-radius: dt('listbox.border.radius');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
        outline-color: transparent;
        box-shadow: dt('listbox.shadow');
    }

    .p-listbox.p-disabled {
        opacity: 1;
        background: dt('listbox.disabled.background');
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-disabled .p-listbox-option {
        color: dt('listbox.disabled.color');
    }

    .p-listbox.p-invalid {
        border-color: dt('listbox.invalid.border.color');
    }

    .p-listbox-header {
        padding: dt('listbox.list.header.padding');
    }

    .p-listbox-filter {
        width: 100%;
    }

    .p-listbox-list-container {
        overflow: auto;
    }

    .p-listbox-list {
        list-style-type: none;
        margin: 0;
        padding: dt('listbox.list.padding');
        outline: 0 none;
        display: flex;
        flex-direction: column;
        gap: dt('listbox.list.gap');
    }

    .p-listbox-option {
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        padding: dt('listbox.option.padding');
        border: 0 none;
        border-radius: dt('listbox.option.border.radius');
        color: dt('listbox.option.color');
        transition:
            background dt('listbox.transition.duration'),
            color dt('listbox.transition.duration'),
            border-color dt('listbox.transition.duration'),
            box-shadow dt('listbox.transition.duration'),
            outline-color dt('listbox.transition.duration');
    }

    .p-listbox-striped li:nth-child(even of .p-listbox-option) {
        background: dt('listbox.option.striped.background');
    }

    .p-listbox .p-listbox-list .p-listbox-option.p-listbox-option-selected {
        background: dt('listbox.option.selected.background');
        color: dt('listbox.option.selected.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option.p-listbox-option-selected.p-focus {
        background: dt('listbox.option.selected.focus.background');
        color: dt('listbox.option.selected.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled).p-focus {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox:not(.p-disabled) .p-listbox-option:not(.p-listbox-option-selected):not(.p-disabled):hover {
        background: dt('listbox.option.focus.background');
        color: dt('listbox.option.focus.color');
    }

    .p-listbox-option-blank-icon {
        flex-shrink: 0;
    }

    .p-listbox-option-check-icon {
        position: relative;
        flex-shrink: 0;
        margin-inline-start: dt('listbox.checkmark.gutter.start');
        margin-inline-end: dt('listbox.checkmark.gutter.end');
        color: dt('listbox.checkmark.color');
    }

    .p-listbox-option-group {
        margin: 0;
        padding: dt('listbox.option.group.padding');
        color: dt('listbox.option.group.color');
        background: dt('listbox.option.group.background');
        font-weight: dt('listbox.option.group.font.weight');
    }

    .p-listbox-empty-message {
        padding: dt('listbox.empty.message.padding');
    }

    .p-listbox-fluid {
        width: 100%;
    }
`,Vt={root:function(e){var i=e.instance,s=e.props;return["p-listbox p-component",{"p-listbox-striped":s.striped,"p-disabled":s.disabled,"p-listbox-fluid":s.fluid,"p-invalid":i.$invalid}]},header:"p-listbox-header",pcFilter:"p-listbox-filter",listContainer:"p-listbox-list-container",list:"p-listbox-list",optionGroup:"p-listbox-option-group",option:function(e){var i=e.instance,s=e.props,l=e.option,n=e.index,x=e.getItemOptions;return["p-listbox-option",{"p-listbox-option-selected":i.isSelected(l)&&s.highlightOnSelect,"p-focus":i.focusedOptionIndex===i.getOptionIndex(n,x),"p-disabled":i.isOptionDisabled(l)}]},optionCheckIcon:"p-listbox-option-check-icon",optionBlankIcon:"p-listbox-option-blank-icon",emptyMessage:"p-listbox-empty-message"},Ct=Ie.extend({name:"listbox",style:Lt,classes:Vt}),Tt={name:"BaseListbox",extends:we,props:{options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,scrollHeight:{type:String,default:"14rem"},dataKey:null,multiple:{type:Boolean,default:!1},metaKeySelection:{type:Boolean,default:!1},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!0},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},filterIcon:{type:String,default:void 0},striped:{type:Boolean,default:!1},tabindex:{type:Number,default:0},fluid:{type:Boolean,default:null},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:Ct,provide:function(){return{$pcListbox:this,$parentInstance:this}}};function ce(t){return Et(t)||Rt(t)||Kt(t)||_t()}function _t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kt(t,e){if(t){if(typeof t=="string")return fe(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?fe(t,e):void 0}}function Rt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Et(t){if(Array.isArray(t))return fe(t)}function fe(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}var he={name:"Listbox",extends:Tt,inheritAttrs:!1,emits:["change","focus","blur","filter","item-dblclick","option-dblclick"],list:null,virtualScroller:null,optionTouched:!1,startRangeIndex:-1,searchTimeout:null,searchValue:"",data:function(){return{filterValue:null,focused:!1,focusedOptionIndex:-1}},watch:{options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel()},methods:{getOptionIndex:function(e,i){return this.virtualScrollerDisabled?e:i&&i(e).index},getOptionLabel:function(e){return this.optionLabel?G(e,this.optionLabel):typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:null},getOptionValue:function(e){return this.optionValue?G(e,this.optionValue):e},getOptionRenderKey:function(e,i){return(this.dataKey?G(e,this.dataKey):this.getOptionLabel(e))+"_"+i},getPTOptions:function(e,i,s,l){return this.ptm(l,{context:{selected:this.isSelected(e),focused:this.focusedOptionIndex===this.getOptionIndex(s,i),disabled:this.isOptionDisabled(e)}})},isOptionDisabled:function(e){return this.optionDisabled?G(e,this.optionDisabled):!1},isOptionGroup:function(e){return this.optionGroupLabel&&e.optionGroup&&e.group},getOptionGroupLabel:function(e){return G(e,this.optionGroupLabel)},getOptionGroupChildren:function(e){return G(e,this.optionGroupChildren)},getAriaPosInset:function(e){var i=this;return(this.optionGroupLabel?e-this.visibleOptions.slice(0,e).filter(function(s){return i.isOptionGroup(s)}).length:e)+1},onFirstHiddenFocus:function(){re(this.list);var e=ye(this.$el,':not([data-p-hidden-focusable="true"])');this.$refs.lastHiddenFocusableElement.tabIndex=Ze(e)?void 0:-1,this.$refs.firstHiddenFocusableElement.tabIndex=-1},onLastHiddenFocus:function(e){var i=e.relatedTarget;if(i===this.list){var s=ye(this.$el,':not([data-p-hidden-focusable="true"])');re(s),this.$refs.firstHiddenFocusableElement.tabIndex=void 0}else re(this.$refs.firstHiddenFocusableElement);this.$refs.lastHiddenFocusableElement.tabIndex=-1},onFocusout:function(e){!this.$el.contains(e.relatedTarget)&&this.$refs.lastHiddenFocusableElement&&this.$refs.firstHiddenFocusableElement&&(this.$refs.lastHiddenFocusableElement.tabIndex=this.$refs.firstHiddenFocusableElement.tabIndex=void 0)},onListFocus:function(e){this.focused=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.findSelectedOptionIndex(),this.autoUpdateModel(),this.scrollInView(this.focusedOptionIndex),this.$emit("focus",e)},onListBlur:function(e){this.focused=!1,this.focusedOptionIndex=this.startRangeIndex=-1,this.searchValue="",this.$emit("blur",e)},onListKeyDown:function(e){var i=this,s=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break;default:if(this.multiple&&e.code==="KeyA"&&s){var l=this.visibleOptions.filter(function(n){return i.isValidOption(n)}).map(function(n){return i.getOptionValue(n)});this.updateModel(e,l),e.preventDefault();break}!s&&Je(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}},onOptionSelect:function(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;this.disabled||this.isOptionDisabled(i)||(this.multiple?this.onOptionSelectMultiple(e,i):this.onOptionSelectSingle(e,i),this.optionTouched=!1,s!==-1&&(this.focusedOptionIndex=s))},onOptionMouseDown:function(e,i){this.changeFocusedOptionIndex(e,i)},onOptionMouseMove:function(e,i){this.focusOnHover&&this.focused&&this.changeFocusedOptionIndex(e,i)},onOptionTouchEnd:function(){this.disabled||(this.optionTouched=!0)},onOptionDblClick:function(e,i){this.$emit("item-dblclick",{originalEvent:e,value:i}),this.$emit("option-dblclick",{originalEvent:e,value:i})},onOptionSelectSingle:function(e,i){var s=this.isSelected(i),l=!1,n=null,x=this.optionTouched?!1:this.metaKeySelection;if(x){var g=e&&(e.metaKey||e.ctrlKey);s?g&&(n=null,l=!0):(n=this.getOptionValue(i),l=!0)}else n=s?null:this.getOptionValue(i),l=!0;l&&this.updateModel(e,n)},onOptionSelectMultiple:function(e,i){var s=this.isSelected(i),l=null,n=this.optionTouched?!1:this.metaKeySelection;if(n){var x=e.metaKey||e.ctrlKey;s?l=x?this.removeOption(i):[this.getOptionValue(i)]:(l=x?this.d_value||[]:[],l=[].concat(ce(l),[this.getOptionValue(i)]))}else l=s?this.removeOption(i):[].concat(ce(this.d_value||[]),[this.getOptionValue(i)]);this.updateModel(e,l)},onOptionSelectRange:function(e){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(s===-1&&(s=this.findNearestSelectedOptionIndex(l,!0)),l===-1&&(l=this.findNearestSelectedOptionIndex(s)),s!==-1&&l!==-1){var n=Math.min(s,l),x=Math.max(s,l),g=this.visibleOptions.slice(n,x+1).filter(function(I){return i.isValidOption(I)}).map(function(I){return i.getOptionValue(I)});this.updateModel(e,g)}},onFilterChange:function(e){this.$emit("filter",{originalEvent:e,value:e.target.value,filterValue:this.visibleOptions}),this.focusedOptionIndex=this.startRangeIndex=-1},onFilterKeyDown:function(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey(e);break}},onArrowDownKey:function(e){var i=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex,i),this.changeFocusedOptionIndex(e,i),e.preventDefault()},onArrowUpKey:function(e){var i=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,i,this.startRangeIndex),this.changeFocusedOptionIndex(e,i),e.preventDefault()},onArrowLeftKey:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i&&(this.focusedOptionIndex=-1)},onHomeKey:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i){var s=e.currentTarget;e.shiftKey?s.setSelectionRange(0,e.target.selectionStart):(s.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else{var l=e.metaKey||e.ctrlKey,n=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&l&&this.onOptionSelectRange(e,n,this.startRangeIndex),this.changeFocusedOptionIndex(e,n)}e.preventDefault()},onEndKey:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i){var s=e.currentTarget;if(e.shiftKey)s.setSelectionRange(e.target.selectionStart,s.value.length);else{var l=s.value.length;s.setSelectionRange(l,l),this.focusedOptionIndex=-1}}else{var n=e.metaKey||e.ctrlKey,x=this.findLastOptionIndex();this.multiple&&e.shiftKey&&n&&this.onOptionSelectRange(e,this.startRangeIndex,x),this.changeFocusedOptionIndex(e,x)}e.preventDefault()},onPageUpKey:function(e){this.scrollInView(0),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.visibleOptions.length-1),e.preventDefault()},onEnterKey:function(e){this.focusedOptionIndex!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex):this.onOptionSelect(e,this.visibleOptions[this.focusedOptionIndex]))},onSpaceKey:function(e){e.preventDefault(),this.onEnterKey(e)},onShiftKey:function(){this.startRangeIndex=this.focusedOptionIndex},isOptionMatched:function(e){var i;return this.isValidOption(e)&&typeof this.getOptionLabel(e)=="string"&&((i=this.getOptionLabel(e))===null||i===void 0?void 0:i.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(e){return W(e)&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))},isValidSelectedOption:function(e){return this.isValidOption(e)&&this.isSelected(e)},isEquals:function(e,i){return ge(e,i,this.equalityKey)},isSelected:function(e){var i=this,s=this.getOptionValue(e);return this.multiple?(this.d_value||[]).some(function(l){return i.isEquals(l,s)}):this.isEquals(this.d_value,s)},findFirstOptionIndex:function(){var e=this;return this.visibleOptions.findIndex(function(i){return e.isValidOption(i)})},findLastOptionIndex:function(){var e=this;return Q(this.visibleOptions,function(i){return e.isValidOption(i)})},findNextOptionIndex:function(e){var i=this,s=e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return i.isValidOption(l)}):-1;return s>-1?s+e+1:e},findPrevOptionIndex:function(e){var i=this,s=e>0?Q(this.visibleOptions.slice(0,e),function(l){return i.isValidOption(l)}):-1;return s>-1?s:e},findSelectedOptionIndex:function(){var e=this;if(this.$filled)if(this.multiple){for(var i=function(){var x=e.d_value[l],g=e.visibleOptions.findIndex(function(I){return e.isValidSelectedOption(I)&&e.isEquals(x,e.getOptionValue(I))});if(g>-1)return{v:g}},s,l=this.d_value.length-1;l>=0;l--)if(s=i(),s)return s.v}else return this.visibleOptions.findIndex(function(n){return e.isValidSelectedOption(n)});return-1},findFirstSelectedOptionIndex:function(){var e=this;return this.$filled?this.visibleOptions.findIndex(function(i){return e.isValidSelectedOption(i)}):-1},findLastSelectedOptionIndex:function(){var e=this;return this.$filled?Q(this.visibleOptions,function(i){return e.isValidSelectedOption(i)}):-1},findNextSelectedOptionIndex:function(e){var i=this,s=this.$filled&&e<this.visibleOptions.length-1?this.visibleOptions.slice(e+1).findIndex(function(l){return i.isValidSelectedOption(l)}):-1;return s>-1?s+e+1:-1},findPrevSelectedOptionIndex:function(e){var i=this,s=this.$filled&&e>0?Q(this.visibleOptions.slice(0,e),function(l){return i.isValidSelectedOption(l)}):-1;return s>-1?s:-1},findNearestSelectedOptionIndex:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=-1;return this.$filled&&(i?(s=this.findPrevSelectedOptionIndex(e),s=s===-1?this.findNextSelectedOptionIndex(e):s):(s=this.findNextSelectedOptionIndex(e),s=s===-1?this.findPrevSelectedOptionIndex(e):s)),s>-1?s:e},findFirstFocusedOptionIndex:function(){var e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e},findLastFocusedOptionIndex:function(){var e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e},searchOptions:function(e,i){var s=this;this.searchValue=(this.searchValue||"")+i;var l=-1;W(this.searchValue)&&(this.focusedOptionIndex!==-1?(l=this.visibleOptions.slice(this.focusedOptionIndex).findIndex(function(n){return s.isOptionMatched(n)}),l=l===-1?this.visibleOptions.slice(0,this.focusedOptionIndex).findIndex(function(n){return s.isOptionMatched(n)}):l+this.focusedOptionIndex):l=this.visibleOptions.findIndex(function(n){return s.isOptionMatched(n)}),l===-1&&this.focusedOptionIndex===-1&&(l=this.findFirstFocusedOptionIndex()),l!==-1&&this.changeFocusedOptionIndex(e,l)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){s.searchValue="",s.searchTimeout=null},500)},removeOption:function(e){var i=this;return this.d_value.filter(function(s){return!ge(s,i.getOptionValue(e),i.equalityKey)})},changeFocusedOptionIndex:function(e,i){this.focusedOptionIndex!==i&&(this.focusedOptionIndex=i,this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions[i]))},scrollInView:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var s=i!==-1?"".concat(e.$id,"_").concat(i):e.focusedOptionId,l=Qe(e.list,'li[id="'.concat(s,'"]'));l?l.scrollIntoView&&l.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):e.virtualScrollerDisabled||e.virtualScroller&&e.virtualScroller.scrollToIndex(i!==-1?i:e.focusedOptionIndex)})},autoUpdateModel:function(){this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&!this.multiple&&this.focused&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex(),this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex]))},updateModel:function(e,i){this.writeValue(i,e),this.$emit("change",{originalEvent:e,value:i})},listRef:function(e,i){this.list=e,i&&i(e)},virtualScrollerRef:function(e){this.virtualScroller=e}},computed:{optionsListFlat:function(){return this.filterValue?be.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale):this.options},optionsListGroup:function(){var e=this,i=[];return(this.options||[]).forEach(function(s){var l=e.getOptionGroupChildren(s)||[],n=e.filterValue?be.filter(l,e.searchFields,e.filterValue,e.filterMatchMode,e.filterLocale):l;n!=null&&n.length&&i.push.apply(i,[{optionGroup:s,group:!0}].concat(ce(n)))}),i},visibleOptions:function(){return this.optionGroupLabel?this.optionsListGroup:this.optionsListFlat},hasSelectedOption:function(){return W(this.d_value)},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return W(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}",this.multiple?this.d_value.length:"1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var e=this;return this.visibleOptions.filter(function(i){return!e.isOptionGroup(i)}).length},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions},containerDataP:function(){return We({invalid:this.$invalid,disabled:this.disabled})}},directives:{ripple:qe},components:{InputText:pe,VirtualScroller:bt,InputIcon:yt,IconField:gt,SearchIcon:vt,CheckIcon:Ye,BlankIcon:mt}},At=["id","data-p"],Pt=["tabindex"],zt=["id","aria-multiselectable","aria-label","aria-labelledby","aria-activedescendant","aria-disabled"],Bt=["id"],Ut=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousedown","onMousemove","onDblclick","data-p-selected","data-p-focused","data-p-disabled"],Ht=["tabindex"];function Gt(t,e,i,s,l,n){var x=E("InputText"),g=E("SearchIcon"),I=E("InputIcon"),$=E("IconField"),q=E("CheckIcon"),D=E("BlankIcon"),f=E("VirtualScroller"),A=et("ripple");return p(),v("div",y({id:t.$id,class:t.cx("root"),onFocusout:e[7]||(e[7]=function(){return n.onFocusout&&n.onFocusout.apply(n,arguments)}),"data-p":n.containerDataP},t.ptmi("root")),[o("span",y({ref:"firstHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[0]||(e[0]=function(){return n.onFirstHiddenFocus&&n.onFirstHiddenFocus.apply(n,arguments)})},t.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,Pt),t.$slots.header?(p(),v("div",y({key:0,class:t.cx("header")},t.ptm("header")),[R(t.$slots,"header",{value:t.d_value,options:n.visibleOptions})],16)):_("",!0),t.filter?(p(),v("div",y({key:1,class:t.cx("header")},t.ptm("header")),[r($,{unstyled:t.unstyled,pt:t.ptm("pcFilterContainer")},{default:h(function(){return[r(x,{modelValue:l.filterValue,"onUpdate:modelValue":e[1]||(e[1]=function(S){return l.filterValue=S}),type:"text",class:Se(t.cx("pcFilter")),placeholder:t.filterPlaceholder,role:"searchbox",autocomplete:"off",disabled:t.disabled,unstyled:t.unstyled,"aria-owns":t.$id+"_list","aria-activedescendant":n.focusedOptionId,tabindex:!t.disabled&&!l.focused?t.tabindex:-1,onInput:n.onFilterChange,onKeydown:n.onFilterKeyDown,pt:t.ptm("pcFilter")},null,8,["modelValue","class","placeholder","disabled","unstyled","aria-owns","aria-activedescendant","tabindex","onInput","onKeydown","pt"]),r(I,{unstyled:t.unstyled,pt:t.ptm("pcFilterIconContainer")},{default:h(function(){return[R(t.$slots,"filtericon",{},function(){return[t.filterIcon?(p(),v("span",y({key:0,class:t.filterIcon},t.ptm("filterIcon")),null,16)):(p(),T(g,tt(y({key:1},t.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),o("span",y({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),b(n.filterResultMessageText),17)],16)):_("",!0),o("div",y({class:t.cx("listContainer"),style:[{"max-height":n.virtualScrollerDisabled?t.scrollHeight:""},t.listStyle]},t.ptm("listContainer")),[r(f,y({ref:n.virtualScrollerRef},t.virtualScrollerOptions,{items:n.visibleOptions,style:[{height:t.scrollHeight},t.listStyle],tabindex:-1,disabled:n.virtualScrollerDisabled,pt:t.ptm("virtualScroller")}),it({content:h(function(S){var K=S.styleClass,X=S.contentRef,B=S.items,F=S.getItemOptions,ee=S.contentStyle,U=S.itemSize;return[o("ul",y({ref:function(k){return n.listRef(k,X)},id:t.$id+"_list",class:[t.cx("list"),K],style:ee,tabindex:-1,role:"listbox","aria-multiselectable":t.multiple,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-activedescendant":l.focused?n.focusedOptionId:void 0,"aria-disabled":t.disabled,onFocus:e[3]||(e[3]=function(){return n.onListFocus&&n.onListFocus.apply(n,arguments)}),onBlur:e[4]||(e[4]=function(){return n.onListBlur&&n.onListBlur.apply(n,arguments)}),onKeydown:e[5]||(e[5]=function(){return n.onListKeyDown&&n.onListKeyDown.apply(n,arguments)})},t.ptm("list")),[(p(!0),v(j,null,Z(B,function(O,k){return p(),v(j,{key:n.getOptionRenderKey(O,n.getOptionIndex(k,F))},[n.isOptionGroup(O)?(p(),v("li",y({key:0,id:t.$id+"_"+n.getOptionIndex(k,F),style:{height:U?U+"px":void 0},class:t.cx("optionGroup"),role:"option"},{ref_for:!0},t.ptm("optionGroup")),[R(t.$slots,"optiongroup",{option:O.optionGroup,index:n.getOptionIndex(k,F)},function(){return[J(b(n.getOptionGroupLabel(O.optionGroup)),1)]})],16,Bt)):z((p(),v("li",y({key:1,id:t.$id+"_"+n.getOptionIndex(k,F),style:{height:U?U+"px":void 0},class:t.cx("option",{option:O,index:k,getItemOptions:F}),role:"option","aria-label":n.getOptionLabel(O),"aria-selected":n.isSelected(O),"aria-disabled":n.isOptionDisabled(O),"aria-setsize":n.ariaSetSize,"aria-posinset":n.getAriaPosInset(n.getOptionIndex(k,F)),onClick:function(V){return n.onOptionSelect(V,O,n.getOptionIndex(k,F))},onMousedown:function(V){return n.onOptionMouseDown(V,n.getOptionIndex(k,F))},onMousemove:function(V){return n.onOptionMouseMove(V,n.getOptionIndex(k,F))},onTouchend:e[2]||(e[2]=function(C){return n.onOptionTouchEnd()}),onDblclick:function(V){return n.onOptionDblClick(V,O)}},{ref_for:!0},n.getPTOptions(O,F,k,"option"),{"data-p-selected":!t.checkmark&&n.isSelected(O),"data-p-focused":l.focusedOptionIndex===n.getOptionIndex(k,F),"data-p-disabled":n.isOptionDisabled(O)}),[t.checkmark?(p(),v(j,{key:0},[n.isSelected(O)?(p(),T(q,y({key:0,class:t.cx("optionCheckIcon")},{ref_for:!0},t.ptm("optionCheckIcon")),null,16,["class"])):(p(),T(D,y({key:1,class:t.cx("optionBlankIcon")},{ref_for:!0},t.ptm("optionBlankIcon")),null,16,["class"]))],64)):_("",!0),R(t.$slots,"option",{option:O,selected:n.isSelected(O),index:n.getOptionIndex(k,F)},function(){return[J(b(n.getOptionLabel(O)),1)]})],16,Ut)),[[A]])],64)}),128)),l.filterValue&&(!B||B&&B.length===0)?(p(),v("li",y({key:0,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[R(t.$slots,"emptyfilter",{},function(){return[J(b(n.emptyFilterMessageText),1)]})],16)):!t.options||t.options&&t.options.length===0?(p(),v("li",y({key:1,class:t.cx("emptyMessage"),role:"option"},t.ptm("emptyMessage")),[R(t.$slots,"empty",{},function(){return[J(b(n.emptyMessageText),1)]})],16)):_("",!0)],16,zt)]}),_:2},[t.$slots.loader?{name:"loader",fn:h(function(S){var K=S.options;return[R(t.$slots,"loader",{options:K})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),R(t.$slots,"footer",{value:t.d_value,options:n.visibleOptions}),!t.options||t.options&&t.options.length===0?(p(),v("span",y({key:2,role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),b(n.emptyMessageText),17)):_("",!0),o("span",y({role:"status","aria-live":"polite",class:"p-hidden-accessible"},t.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),b(n.selectedMessageText),17),o("span",y({ref:"lastHiddenFocusableElement",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:t.disabled?-1:t.tabindex,onFocus:e[6]||(e[6]=function(){return n.onLastHiddenFocus&&n.onLastHiddenFocus.apply(n,arguments)})},t.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16,Ht)],16,At)}he.render=Gt;const Nt={class:"p-4"},jt={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},$t={class:"flex items-center gap-4"},Xt={class:"flex items-center gap-3"},Yt={class:"flex gap-2"},qt={key:0,class:"flex justify-center py-12"},Wt={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Qt={class:"lg:col-span-2 space-y-6"},Jt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zt={class:"flex items-center gap-2"},ei={class:"font-medium text-lg"},ti={key:0,class:"flex items-center gap-3"},ii={class:"font-medium"},ni={key:1,class:"text-color-secondary italic"},si={class:"flex items-center gap-3"},oi={class:"font-medium"},ai={class:"text-xs text-color-secondary"},li={key:0},ri={class:"flex items-center gap-2"},di={key:1},ui={class:"flex items-center gap-2"},ci={class:"font-medium text-green-600"},pi={class:"md:col-span-2"},fi={class:"p-3 bg-surface-50 dark:bg-surface-800 rounded-lg text-color border border-surface-200 dark:border-surface-700 leading-relaxed whitespace-pre-line"},hi={class:"flex items-center justify-between"},mi={key:0,class:"flex flex-col gap-2"},vi={class:"flex items-center gap-3"},bi={class:"w-10 h-10 rounded-lg bg-primary-50 flex items-center justify-center text-primary"},gi={class:"font-medium text-color"},yi={class:"text-xs text-color-secondary"},xi={class:"flex items-center gap-2"},Oi={key:1,class:"text-color-secondary italic"},ki={class:"flex items-center justify-between"},Ii={key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},Si={class:"flex items-center gap-2"},wi={class:"w-10 h-10 rounded bg-orange-50 flex items-center justify-center text-orange-500 text-xs"},Mi={class:"flex flex-col gap-2"},Di={class:"font-bold text-color"},Fi={key:1,class:"text-color-secondary italic"},Li={class:"space-y-6"},Vi={class:"flex flex-col items-center gap-4"},Ci={class:"text-center"},Ti={class:"flex gap-2 justify-center"},_i={class:"space-y-6"},Ki={key:0,class:"space-y-4"},Ri={class:"flex-1"},Ei={class:"flex items-center gap-2 mb-1 w-full justify-between"},Ai={class:"flex items-center gap-2"},Pi={class:"font-bold text-sm"},zi={class:"text-xs text-color-secondary"},Bi={class:"text-color text-sm whitespace-pre-wrap bg-surface-50 dark:bg-surface-800 p-3 rounded-lg rounded-tl-none border border-surface-border"},Ui={key:1,class:"text-color-secondary italic text-sm"},Hi={class:"border-t border-surface-border pt-4 mt-2"},Gi={class:"flex flex-col gap-2"},Ni={class:"flex justify-end"},ji={key:2,class:"text-center py-12"},$i={class:"flex flex-col gap-4"},Xi={class:"relative w-full"},Yi={class:"absolute top-1/2 -translate-y-1/2 left-3 text-surface-500 z-10"},qi={class:"flex align-items-center gap-2"},Wi={class:"font-medium"},Qi={class:"text-xs text-color-secondary"},Ji={class:"flex flex-col gap-4"},Zi={class:"relative w-full"},en={class:"absolute top-1/2 -translate-y-1/2 left-3 text-surface-500 z-10"},tn={class:"flex align-items-center gap-2"},nn={class:"font-medium"},mn=nt({__name:"ActionDetail",setup(t){const e=at(),i=ut(),s=ct(),l=st(),n=ft(),x=ht(),g=ot(),I=Number(e.params.id),$=L(!0),q=L(!1),D=L(0),f=de(()=>s.currentAction),A=L(!1),S=L(null),K=L(""),X=L(!1),B=()=>{S.value=null,K.value="",n.fetchDocuments(1,100),A.value=!0},F=de(()=>{if(!n.documents)return[];const d=f.value?.documents?.map(c=>c.id)||[];let a=n.documents.filter(c=>!d.includes(c.id));if(K.value){const c=K.value.toLowerCase();a=a.filter(w=>w.title.toLowerCase().includes(c)||w.filename.toLowerCase().includes(c))}return a}),ee=async()=>{if(S.value){X.value=!0;try{await s.linkDocument(I,S.value.id),g.add({severity:"success",summary:"Succès",detail:"Document lié avec succès",life:3e3}),A.value=!1}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la liaison du document",life:3e3})}finally{X.value=!1}}},U=async d=>{try{await s.unlinkDocument(I,d),g.add({severity:"success",summary:"Succès",detail:"Document délié avec succès",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors du déliage du document",life:3e3})}},O=async(d,a)=>{try{await n.downloadDocument(d,a),g.add({severity:"success",summary:"Succès",detail:"Téléchargement démarré",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors du téléchargement",life:3e3})}},k=L(!1),C=L(null),V=L(""),te=L(!1),De=()=>{C.value=null,V.value="",x.fetchIndicators(1,100),k.value=!0},Fe=de(()=>{if(!x.indicators)return[];const d=f.value?.indicators?.map(c=>c.id)||[];let a=x.indicators.filter(c=>!d.includes(c.id));if(V.value){const c=V.value.toLowerCase();a=a.filter(w=>w.name.toLowerCase().includes(c)||w.code.toLowerCase().includes(c))}return a}),Le=async()=>{if(C.value){te.value=!0;try{await s.linkIndicator(I,C.value.id),g.add({severity:"success",summary:"Succès",detail:"Indicateur lié avec succès",life:3e3}),k.value=!1}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la liaison de l'indicateur",life:3e3})}finally{te.value=!1}}},Ve=async d=>{try{await s.unlinkIndicator(I,d),g.add({severity:"success",summary:"Succès",detail:"Indicateur délié avec succès",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors du déliage de l'indicateur",life:3e3})}},H=L(""),ie=L(!1),Ce=async()=>{if(H.value.trim()){ie.value=!0;try{await s.addComment(I,H.value),H.value="",g.add({severity:"success",summary:"Succès",detail:"Commentaire ajouté",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Impossible d'ajouter le commentaire",life:3e3})}finally{ie.value=!1}}};lt(async()=>{I&&($.value=!0,await s.fetchActionById(I),$.value=!1)});const Te=d=>d?{low:"Basse",medium:"Moyenne",high:"Haute",critical:"Critique"}[d]||d:"-",_e=d=>d?{low:"info",medium:"warn",high:"danger",critical:"danger"}[d]||"info":"secondary",Ke=d=>d?{open:"Ouvert",in_progress:"En cours",completed:"Terminé",cancelled:"Annulé"}[d]||d:"-",Re=d=>d&&{open:"info",in_progress:"warn",completed:"success",cancelled:"secondary"}[d]||"secondary",ne=d=>d?new Date(d).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",Ee=d=>d?new Date(d).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ae=(d,a)=>{if(!d||!a||a==="completed"||a==="cancelled")return"text-color";const c=new Date,u=new Date(d).getTime()-c.getTime(),P=Math.ceil(u/(1e3*60*60*24));return P<0?"text-red-600 font-bold":P<=3?"text-orange-500 font-bold":P<=7?"text-yellow-600":"text-color"},Pe=d=>{const a=l.currentUser;return a?a.role==="admin"||a.id===d.user_id:!1},ze=rt(),Be=d=>{ze.require({message:"Êtes-vous sûr de vouloir supprimer ce commentaire ?",header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",rejectLabel:"Annuler",acceptLabel:"Supprimer",rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:()=>{Ue(d)}})},Ue=async d=>{try{await s.deleteComment(d),g.add({severity:"success",summary:"Succès",detail:"Commentaire supprimé",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la suppression du commentaire",life:3e3})}},se=d=>d?`${d.first_name.charAt(0)}${d.last_name.charAt(0)}`.toUpperCase():"?",He=d=>{let a=0;for(let w=0;w<d.length;w++)a=d.charCodeAt(w)+((a<<5)-a);const c=(a&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-c.length)+c},me=()=>{i.back()},Ge=()=>{i.push(`/actions/${I}/edit`)},Ne=()=>{ae()},je=()=>{ae()},oe=L(null),ve=d=>{let a=D.value+d;a<0&&(a=0),a>100&&(a=100),D.value=a,oe.value&&clearTimeout(oe.value),oe.value=setTimeout(()=>{ae()},1e3)},$e=d=>d<30?"#ef4444":d<70?"#f59e0b":"#22c55e",ae=async()=>{if(D.value!==f.value?.progress){q.value=!0;try{await s.updateProgress(I,D.value),g.add({severity:"success",summary:"Succès",detail:"Progression mise à jour",life:3e3})}catch{g.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la mise à jour de la progression",life:3e3})}finally{q.value=!1}}};return dt(f,d=>{d&&(D.value=d.progress||0)},{immediate:!0}),(d,a)=>{const c=E("font-awesome-icon"),w=Xe;return p(),v("div",Nt,[o("div",jt,[o("div",$t,[r(m(M),{text:"",rounded:"",severity:"secondary",onClick:me},{icon:h(()=>[r(c,{icon:"arrow-left"})]),_:1}),o("div",null,[o("div",Xt,[o("h2",null,b(f.value?.title),1),r(m(ke),{value:Ke(f.value?.status),severity:Re(f.value?.status)},null,8,["value","severity"])])])]),o("div",Yt,[r(m(M),{label:"Modifier",onClick:Ge,severity:"warning",outlined:""},{icon:h(()=>[r(c,{icon:"pencil",class:"mr-2"})]),_:1})])]),$.value?(p(),v("div",qt,[r(c,{icon:["fas","spinner"],spin:"",size:"2x",class:"text-color-secondary"})])):f.value?(p(),v("div",Wt,[o("div",Qt,[r(m(Y),null,{title:h(()=>[...a[12]||(a[12]=[o("h4",null,"Informations",-1)])]),content:h(()=>[o("div",Jt,[o("div",null,[a[13]||(a[13]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Type : ",-1)),o("div",Zt,[o("div",{class:"w-8 h-8 rounded flex items-center justify-center",style:Oe({backgroundColor:f.value.action_type?.color+"20",color:f.value.action_type?.color})},[r(c,{icon:["fas",f.value.action_type?.icon||"tasks"]},null,8,["icon"])],4),o("span",ei,b(f.value.action_type?.name||"-"),1)])]),o("div",null,[a[14]||(a[14]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Priorité : ",-1)),r(m(ke),{value:Te(f.value.priority),severity:_e(f.value.priority),class:"text-sm px-3 py-1"},null,8,["value","severity"])]),o("div",null,[a[15]||(a[15]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Responsable : ",-1)),f.value.assignee?(p(),v("div",ti,[r(m(ue),{label:se(f.value.assignee),shape:"circle",size:"normal",class:"bg-primary-100 text-primary-700"},null,8,["label"]),o("div",null,[o("div",ii,b(f.value.assignee.first_name)+" "+b(f.value.assignee.last_name),1)])])):(p(),v("span",ni,"Non assigné"))]),o("div",null,[a[16]||(a[16]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Créé par : ",-1)),o("div",si,[r(m(ue),{label:se(f.value.creator),shape:"circle",size:"normal",class:"bg-surface-200 text-surface-600"},null,8,["label"]),o("div",null,[o("div",oi,b(f.value.creator?`${f.value.creator.first_name} ${f.value.creator.last_name}`:"Système"),1),o("div",ai," Le "+b(ne(f.value.created_at)),1)])])]),f.value.due_date?(p(),v("div",li,[a[17]||(a[17]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Échéance : ",-1)),o("div",ri,[r(c,{icon:["fas","calendar"],class:"text-color-secondary"}),o("span",{class:Se(["font-medium",Ae(f.value.due_date,f.value.status)])},b(ne(f.value.due_date)),3)])])):_("",!0),f.value.completed_date?(p(),v("div",di,[a[18]||(a[18]=o("span",{class:"block font-bold text-color-secondary mb-1"},"Date de fin : ",-1)),o("div",ui,[r(c,{icon:["fas","calendar-check"],class:"text-green-600"}),o("div",ci,b(ne(f.value.completed_date)),1)])])):_("",!0),o("div",pi,[a[19]||(a[19]=o("span",{class:"block font-bold text-color-secondary mb-2"},"Description : ",-1)),o("div",fi,b(f.value.description||"Aucune description."),1)])])]),_:1}),r(m(Y),null,{title:h(()=>[o("div",hi,[a[20]||(a[20]=o("h4",null,"Documents liés",-1)),z((p(),T(m(M),{text:"",rounded:"",onClick:B},{icon:h(()=>[r(c,{icon:"plus"})]),_:1})),[[w,"Ajouter un document"]])])]),content:h(()=>[f.value.documents&&f.value.documents.length>0?(p(),v("div",mi,[(p(!0),v(j,null,Z(f.value.documents,u=>(p(),v("div",{key:u.id,class:"flex items-center justify-between p-3 border rounded-xl hover:bg-surface-50 dark:hover:bg-surface-800 transition-colors group"},[o("div",vi,[o("div",bi,[r(c,{icon:"file-lines",class:"text-xl"})]),o("div",null,[o("div",gi,b(u.title),1),o("div",yi,b(u.filename),1)])]),o("div",xi,[z((p(),T(m(M),{text:"",rounded:"",severity:"secondary",size:"small",onClick:P=>O(u.id,u.filename)},{icon:h(()=>[r(c,{icon:"download"})]),_:1},8,["onClick"])),[[w,"Télécharger",void 0,{top:!0}]]),z((p(),T(m(M),{text:"",rounded:"",severity:"danger",size:"small",class:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:P=>U(u.id)},{icon:h(()=>[r(c,{icon:"xmark"})]),_:1},8,["onClick"])),[[w,"Délier",void 0,{top:!0}]])])]))),128))])):(p(),v("p",Oi,"Aucun document lié."))]),_:1}),r(m(Y),null,{title:h(()=>[o("div",ki,[a[21]||(a[21]=o("h4",null,"Indicateurs liés",-1)),z((p(),T(m(M),{text:"",rounded:"",onClick:De},{icon:h(()=>[r(c,{icon:"plus"})]),_:1})),[[w,"Lier un indicateur"]])])]),content:h(()=>[f.value.indicators&&f.value.indicators.length>0?(p(),v("div",Ii,[(p(!0),v(j,null,Z(f.value.indicators,u=>(p(),v("div",{key:u.id,class:"flex items-center justify-between p-2 border rounded-lg hover:bg-surface-50 dark:hover:bg-surface-800 transition-colors group"},[o("div",Si,[o("div",wi,[r(c,{icon:"chart-line",class:"text-xl"})]),o("div",Mi,[o("span",Di,b(u.name),1)])]),z((p(),T(m(M),{text:"",rounded:"",severity:"danger",size:"small",class:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:P=>Ve(u.id)},{icon:h(()=>[r(c,{icon:"xmark"})]),_:1},8,["onClick"])),[[w,"Délier",void 0,{top:!0}]])]))),128))])):(p(),v("p",Fi,"Aucun indicateur lié."))]),_:1})]),o("div",Li,[r(m(Y),null,{title:h(()=>[...a[22]||(a[22]=[o("h4",null,"Progression",-1)])]),content:h(()=>[o("div",Vi,[r(m(Me),{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=u=>D.value=u),size:120,step:5,valueColor:$e(D.value),rangeColor:"#e5e7eb",strokeWidth:15,valueTemplate:"{value}%",readonly:!1,onChange:je},null,8,["modelValue","valueColor"]),o("div",Ci,[a[23]||(a[23]=o("p",{class:"text-sm text-color-secondary"},"Modifier la progression",-1)),o("div",Ti,[r(m(M),{size:"small",outlined:"",rounded:"",onClick:a[1]||(a[1]=u=>ve(-10)),severity:"secondary",disabled:D.value<=0},{icon:h(()=>[r(c,{icon:"minus"})]),_:1},8,["disabled"]),D.value!==f.value?.progress?(p(),T(m(M),{key:0,size:"small",outlined:"",rounded:"",onClick:Ne,severity:"success",disabled:D.value===f.value?.progress},{icon:h(()=>[r(c,{icon:"check"})]),_:1},8,["disabled"])):_("",!0),r(m(M),{size:"small",outlined:"",rounded:"",onClick:a[2]||(a[2]=u=>ve(10)),severity:"secondary",disabled:D.value>=100},{icon:h(()=>[r(c,{icon:"plus"})]),_:1},8,["disabled"])])])])]),_:1}),r(m(Y),null,{title:h(()=>[...a[24]||(a[24]=[o("h4",null,"Commentaires",-1)])]),content:h(()=>[o("div",_i,[f.value.comments&&f.value.comments.length>0?(p(),v("div",Ki,[(p(!0),v(j,null,Z(f.value.comments,u=>(p(),v("div",{key:u.id,class:"flex gap-4 group"},[r(m(ue),{label:se(u.user),shape:"circle",size:"normal",class:"flex-shrink-0",style:Oe({backgroundColor:He(u.user?.username||""),color:"#fff"})},null,8,["label","style"]),o("div",Ri,[o("div",Ei,[o("div",Ai,[o("span",Pi,b(u.user?.first_name)+" "+b(u.user?.last_name),1),o("span",zi,b(Ee(u.created_at)),1)]),Pe(u)?z((p(),T(m(M),{key:0,text:"",rounded:"",severity:"danger",size:"small",class:"!w-6 !h-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:P=>Be(u.id)},{icon:h(()=>[r(c,{icon:"xmark",class:"text-xs"})]),_:1},8,["onClick"])),[[w,"Supprimer",void 0,{top:!0}]]):_("",!0)]),o("div",Bi,b(u.content),1)])]))),128))])):(p(),v("p",Ui,"Aucun commentaire.")),o("div",Hi,[o("div",Gi,[r(m(pt),{modelValue:H.value,"onUpdate:modelValue":a[3]||(a[3]=u=>H.value=u),rows:"3",placeholder:"Écrire un commentaire...",class:"w-full",autoResize:""},null,8,["modelValue"]),o("div",Ni,[r(m(M),{label:"Envoyer",size:"small",onClick:Ce,loading:ie.value,disabled:!H.value.trim()},{icon:h(()=>[r(c,{icon:"paper-plane",class:"mr-2"})]),_:1},8,["loading","disabled"])])])])])]),_:1})])])):(p(),v("div",ji,[r(c,{icon:"exclamation-circle",class:"text-red-500 text-5xl mb-4"}),a[25]||(a[25]=o("h3",{class:"text-lg font-medium text-color"},"Action introuvable",-1)),r(m(M),{label:"Retour à la liste",onClick:me,severity:"secondary",class:"mt-4"})])),r(m(xe),{visible:A.value,"onUpdate:visible":a[7]||(a[7]=u=>A.value=u),header:"Lier un document",style:{width:"40rem"},modal:""},{footer:h(()=>[r(m(M),{label:"Annuler",text:"",onClick:a[6]||(a[6]=u=>A.value=!1)},{icon:h(()=>[r(c,{icon:"xmark",class:"mr-2"})]),_:1}),r(m(M),{label:"Lier",onClick:ee,disabled:!S.value,loading:X.value},{icon:h(()=>[r(c,{icon:"check",class:"mr-2"})]),_:1},8,["disabled","loading"])]),default:h(()=>[o("div",$i,[o("div",Xi,[o("div",Yi,[r(c,{icon:"magnifying-glass"})]),r(m(pe),{modelValue:K.value,"onUpdate:modelValue":a[4]||(a[4]=u=>K.value=u),placeholder:"Rechercher un document...",class:"w-full !pl-12",autofocus:""},null,8,["modelValue"])]),r(m(he),{modelValue:S.value,"onUpdate:modelValue":a[5]||(a[5]=u=>S.value=u),options:F.value,optionLabel:"title",class:"w-full h-96",virtualScrollerOptions:{itemSize:50},listStyle:"height: 100%"},{option:h(u=>[o("div",qi,[r(c,{icon:"file-lines",class:"text-color-secondary"}),o("div",null,[o("div",Wi,b(u.option.title),1),o("div",Qi,b(u.option.filename),1)])])]),_:1},8,["modelValue","options"])])]),_:1},8,["visible"]),r(m(xe),{visible:k.value,"onUpdate:visible":a[11]||(a[11]=u=>k.value=u),header:"Lier un indicateur",style:{width:"40rem"},modal:""},{footer:h(()=>[r(m(M),{label:"Annuler",text:"",onClick:a[10]||(a[10]=u=>k.value=!1)},{icon:h(()=>[r(c,{icon:"xmark",class:"mr-2"})]),_:1}),r(m(M),{label:"Lier",onClick:Le,disabled:!C.value,loading:te.value},{icon:h(()=>[r(c,{icon:"check",class:"mr-2"})]),_:1},8,["disabled","loading"])]),default:h(()=>[o("div",Ji,[o("div",Zi,[o("div",en,[r(c,{icon:"magnifying-glass"})]),r(m(pe),{modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=u=>V.value=u),placeholder:"Rechercher un indicateur...",class:"w-full !pl-12",autofocus:""},null,8,["modelValue"])]),r(m(he),{modelValue:C.value,"onUpdate:modelValue":a[9]||(a[9]=u=>C.value=u),options:Fe.value,optionLabel:"name",class:"w-full h-96",virtualScrollerOptions:{itemSize:50},listStyle:"height: 100%"},{option:h(u=>[o("div",tn,[r(c,{icon:"chart-line",class:"text-orange-500"}),o("div",nn,b(u.option.name),1)])]),_:1},8,["modelValue","options"])])]),_:1},8,["visible"])])}}});export{mn as default};
