import{D as g,h as u,E as c}from"./index-oOuEsLBu.js";const h=g("category",()=>{const s=u([]),o=u(!1),e=u(null);return{categories:s,loading:o,error:e,fetchCategories:async()=>{o.value=!0,e.value=null;try{const{get:t}=c(),r=await t("/categories");r.success&&r.data?s.value=r.data:e.value=r.error||"Impossible de charger les catégories"}catch(t){console.error("Error fetching categories:",t),e.value="Impossible de charger les catégories"}finally{o.value=!1}},createCategory:async t=>{o.value=!0,e.value=null;try{const{post:r}=c(),a=await r("/categories",t);if(a.success&&a.data)return s.value.push(a.data),a.data;throw e.value=a.error||"Impossible de créer la catégorie",new Error(e.value)}catch(r){throw console.error("Error creating category:",r),e.value="Impossible de créer la catégorie",r}finally{o.value=!1}},updateCategory:async(t,r)=>{o.value=!0,e.value=null;try{const{put:a}=c(),l=await a(`/categories/${t}`,r);if(l.success&&l.data){const n=s.value.findIndex(i=>i.id===t);return n!==-1&&(s.value[n]=l.data),l.data}else throw e.value=l.error||"Impossible de mettre à jour la catégorie",new Error(e.value)}catch(a){throw console.error("Error updating category:",a),e.value="Impossible de mettre à jour la catégorie",a}finally{o.value=!1}},deleteCategory:async t=>{o.value=!0,e.value=null;try{const{del:r}=c(),a=await r(`/categories/${t}`);if(a.success)s.value=s.value.filter(l=>l.id!==t);else throw e.value=a.error||"Impossible de supprimer la catégorie",new Error(e.value)}catch(r){throw console.error("Error deleting category:",r),e.value="Impossible de supprimer la catégorie",r}finally{o.value=!1}}}});export{h as u};
