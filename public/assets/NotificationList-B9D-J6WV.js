import{d as x,aB as g,j as v,c as d,a as m,b as e,w as a,u as t,s as p,y as h,r as w,e as u,t as C,m as N,p as A,aJ as R,o as l}from"./index-d7axL_xv.js";import{s as B,a as c}from"./index-C0aPiIhq.js";import{s as M}from"./index-Dw7kVe-F.js";import{f as $}from"./format-hKf1W1ky.js";import"./index-C45h_JBJ.js";import"./index-C4Jjik4c.js";import"./index-xoP2DrFw.js";import"./index-D_33rlMc.js";import"./index-DZQqA5uS.js";import"./index-DbX5rEQv.js";import"./index-rhSU9nKe.js";import"./index-BixvgfbH.js";import"./index-Cx-_v3H7.js";const D={class:"card"},S={class:"flex justify-between items-center mb-6"},T={class:"flex gap-2"},V={key:0,class:"text-green-600 text-sm flex items-center gap-1"},q={key:1,class:"text-blue-600 text-sm font-semibold flex items-center gap-1"},X=x({__name:"NotificationList",setup(j){const f=h(),r=g();v(()=>{r.fetchNotifications(!1)});const y=i=>{r.markAsRead(i)},_=()=>{r.markAllAsRead()},k=i=>$(new Date(i),"dd/MM/yyyy HH:mm",{locale:R}),b=i=>{switch(i){case"action":return"warning";case"equipment":return"info";case"visit":return"success";case"talk":return"primary";default:return"secondary"}};return(i,o)=>{const n=w("font-awesome-icon");return l(),d("div",D,[m("div",S,[o[1]||(o[1]=m("h1",{class:"text-2xl font-bold text-gray-800"},"Notifications",-1)),m("div",T,[e(t(p),{label:"Tout marquer comme lu",icon:"check",onClick:_,disabled:t(r).unreadCount===0},{icon:a(()=>[e(n,{icon:"check-double",class:"mr-2"})]),_:1},8,["disabled"]),e(t(p),{label:"ParamÃ¨tres",severity:"secondary",onClick:o[0]||(o[0]=s=>t(f).push("/notifications/settings"))},{icon:a(()=>[e(n,{icon:"cog",class:"mr-2"})]),_:1})])]),e(t(B),{value:t(r).notifications,loading:t(r).loading,paginator:"",rows:10,stripedRows:""},{default:a(()=>[e(t(c),{field:"type",header:"Type",sortable:""},{body:a(({data:s})=>[e(t(M),{value:s.type,severity:b(s.type)},null,8,["value","severity"])]),_:1}),e(t(c),{field:"message",header:"Message",sortable:""}),e(t(c),{field:"created_at",header:"Date",sortable:""},{body:a(({data:s})=>[u(C(k(s.created_at)),1)]),_:1}),e(t(c),{header:"Statut",sortable:"",field:"read_at"},{body:a(({data:s})=>[s.read_at?(l(),d("span",V,[e(n,{icon:"check"}),o[2]||(o[2]=u(" Lu ",-1))])):(l(),d("span",q,[e(n,{icon:"circle",class:"text-[8px]"}),o[3]||(o[3]=u(" Non lu ",-1))]))]),_:1}),e(t(c),{header:"Actions",style:{width:"100px"}},{body:a(({data:s})=>[s.read_at?A("",!0):(l(),N(t(p),{key:0,icon:"check",text:"",rounded:"",severity:"success",onClick:H=>y(s.id),title:"Marquer comme lu"},{icon:a(()=>[e(n,{icon:"check"})]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["value","loading"])])}}});export{X as default};
