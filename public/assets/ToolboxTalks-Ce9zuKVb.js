import{d as S,f as T,h as f,j as $,c as N,a as p,b as e,w as o,s as B,u as _,k as M,aQ as V,r as j,e as u,t as c,o as z}from"./index-d7axL_xv.js";import{s as A,a as E}from"./index-C0aPiIhq.js";import{u as P}from"./planning-DnUkG1g2.js";import{_ as q}from"./ToolboxTalkForm.vue_vue_type_script_setup_true_lang-DaRbo9sn.js";import{f as L}from"./format-hKf1W1ky.js";import"./index-C45h_JBJ.js";import"./index-C4Jjik4c.js";import"./index-xoP2DrFw.js";import"./index-D_33rlMc.js";import"./index-DZQqA5uS.js";import"./index-DbX5rEQv.js";import"./index-rhSU9nKe.js";import"./index-BixvgfbH.js";import"./index-Cx-_v3H7.js";import"./index-BDoF1CiN.js";import"./index-BJVb_8vX.js";import"./users-CbvhcKd8.js";const Q={class:"card"},R={class:"flex justify-between items-center mb-4"},U={class:"flex gap-2"},re=S({__name:"ToolboxTalks",setup(F){const r=P(),v=T(),a=f(!1),l=f(void 0);$(()=>{r.fetchTalks()});const g=i=>L(new Date(i),"dd/MM/yyyy"),h=()=>{l.value=void 0,a.value=!0},b=i=>{l.value=i,a.value=!0},k=()=>{a.value=!1,r.fetchTalks()},x=i=>{v.require({message:"Êtes-vous sûr de vouloir supprimer ce 1/4h sécurité ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{r.deleteTalk(i.id)}})};return(i,s)=>{const d=j("font-awesome-icon"),m=B,n=E,y=A,C=M,w=V;return z(),N("div",Q,[p("div",R,[s[2]||(s[2]=p("h1",{class:"text-2xl font-bold text-gray-800"},"1/4h Sécurité",-1)),e(m,{label:"Nouveau 1/4h Sécurité",onClick:h},{icon:o(()=>[e(d,{icon:"plus"})]),_:1})]),e(y,{value:_(r).talks,loading:_(r).loading,paginator:"",rows:10,stripedRows:""},{default:o(()=>[e(n,{field:"date",header:"Date",sortable:""},{body:o(({data:t})=>[u(c(g(t.date)),1)]),_:1}),e(n,{field:"topic",header:"Sujet",sortable:""}),e(n,{field:"location",header:"Lieu",sortable:""}),e(n,{field:"instructor.first_name",header:"Animateur",sortable:""},{body:o(({data:t})=>[u(c(t.instructor.first_name)+" "+c(t.instructor.last_name),1)]),_:1}),e(n,{header:"Participants"},{body:o(({data:t})=>[u(c(t.attendees?.length||0)+" participants ",1)]),_:1}),e(n,{header:"Actions",style:{width:"120px"}},{body:o(({data:t})=>[p("div",U,[e(m,{size:"small",text:"",rounded:"",severity:"info",onClick:D=>b(t)},{icon:o(()=>[e(d,{icon:"pencil"})]),_:1},8,["onClick"]),e(m,{size:"small",text:"",rounded:"",severity:"danger",onClick:D=>x(t)},{icon:o(()=>[e(d,{icon:"trash"})]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["value","loading"]),e(C,{visible:a.value,"onUpdate:visible":s[1]||(s[1]=t=>a.value=t),header:l.value?"Modifier le 1/4h Sécurité":"Nouveau 1/4h Sécurité",modal:"",class:"p-fluid w-full max-w-lg"},{default:o(()=>[e(q,{talk:l.value,onSave:k,onCancel:s[0]||(s[0]=t=>a.value=!1)},null,8,["talk"])]),_:1},8,["visible","header"]),e(w)])}}});export{re as default};
