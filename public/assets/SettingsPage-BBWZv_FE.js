import{B as S,C as P,c as y,o as v,z as $,A as g,R as X,M as Y,ax as R,ay as rt,P as M,T as lt,az as L,S as dt,aq as Q,U as tt,l as k,p as C,a as s,m as _,V as I,al as et,a8 as ut,Q as z,w as p,v as at,F as Z,aA as ct,D as bt,E as J,d as U,f as pt,g as q,i as W,h as w,j as F,b as d,u,s as x,r as H,x as ft,t as mt,k as vt,e as B,aB as ht,G as gt}from"./index-oOuEsLBu.js";import{s as yt}from"./index-CPM8aTbb.js";import{a as xt,s as $t}from"./index-CYWC0yQY.js";import{s as _t}from"./index-D2qS9a38.js";import{s as K}from"./index-IzGGsCUm.js";import{T as wt}from"./index-C9vCuLi4.js";import{u as kt}from"./category-B4VxuJds.js";import{s as Tt,a as T}from"./index-obDBiGqA.js";import{s as Vt}from"./index-D25kfrV8.js";import{s as Bt,_ as Ct}from"./IconPicker.vue_vue_type_script_setup_true_lang-BKN-Qb48.js";import{a as St}from"./index-C1JXx-aU.js";import{s as V}from"./index-D4NNOuL2.js";import"./index-CFLhIysZ.js";import"./index-B0RCps1L.js";import"./index-kYhIjE44.js";import"./index-DXuF__Dl.js";import"./index-Bsb9bHmP.js";var Pt=`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
        overflow: hidden;
        background: dt('tabs.tablist.background');
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,At={root:function(t){var n=t.props;return["p-tabs p-component",{"p-tabs-scrollable":n.scrollable}]}},Nt=S.extend({name:"tabs",style:Pt,classes:At}),Lt={name:"BaseTabs",extends:P,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:Nt,provide:function(){return{$pcTabs:this,$parentInstance:this}}},st={name:"Tabs",extends:Lt,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(t){this.d_value=t}},methods:{updateValue:function(t){this.d_value!==t&&(this.d_value=t,this.$emit("update:value",t))},isVertical:function(){return this.orientation==="vertical"}}};function zt(e,t,n,i,r,o){return v(),y("div",g({class:e.cx("root")},e.ptmi("root")),[$(e.$slots,"default")],16)}st.render=zt;var Dt={root:"p-tablist",content:"p-tablist-content p-tablist-viewport",tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},Et=S.extend({name:"tablist",classes:Dt}),It={name:"BaseTabList",extends:P,props:{},style:Et,provide:function(){return{$pcTabList:this,$parentInstance:this}}},nt={name:"TabList",extends:It,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(t){t?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var t=this;setTimeout(function(){t.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(t){this.showNavigators&&this.updateButtonState(),t.preventDefault()},onPrevButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),i=R(t)-n,r=Math.abs(t.scrollLeft),o=i*.8,l=r-o,a=Math.max(l,0);t.scrollLeft=Q(t)?-1*a:a},onNextButtonClick:function(){var t=this.$refs.content,n=this.getVisibleButtonWidths(),i=R(t)-n,r=Math.abs(t.scrollLeft),o=i*.8,l=r+o,a=t.scrollWidth-i,c=Math.min(l,a);t.scrollLeft=Q(t)?-1*c:c},bindResizeObserver:function(){var t=this;this.resizeObserver=new ResizeObserver(function(){return t.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var t;(t=this.resizeObserver)===null||t===void 0||t.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var t=this.$refs,n=t.content,i=t.inkbar,r=t.tabs;if(i){var o=M(n,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(i.style.height=lt(o)+"px",i.style.top=L(o).top-L(r).top+"px"):(i.style.width=dt(o)+"px",i.style.left=L(o).left-L(r).left+"px")}},updateButtonState:function(){var t=this.$refs,n=t.list,i=t.content,r=i.scrollTop,o=i.scrollWidth,l=i.scrollHeight,a=i.offsetWidth,c=i.offsetHeight,f=Math.abs(i.scrollLeft),A=[R(i),rt(i)],O=A[0],j=A[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=r!==0,this.isNextButtonEnabled=n.offsetHeight>=c&&parseInt(r)!==l-j):(this.isPrevButtonEnabled=f!==0,this.isNextButtonEnabled=n.offsetWidth>=a&&parseInt(f)!==o-O)},getVisibleButtonWidths:function(){var t=this.$refs,n=t.prevButton,i=t.nextButton,r=0;return this.showNavigators&&(r=(n?.offsetWidth||0)+(i?.offsetWidth||0)),r}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Y({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:xt,ChevronRightIcon:_t},directives:{ripple:X}},Kt=["data-p"],Ut=["aria-label","tabindex"],Ft=["data-p"],Ot=["aria-orientation"],jt=["aria-label","tabindex"];function Rt(e,t,n,i,r,o){var l=tt("ripple");return v(),y("div",g({ref:"list",class:e.cx("root"),"data-p":o.dataP},e.ptmi("root")),[o.showNavigators&&r.isPrevButtonEnabled?k((v(),y("button",g({key:0,ref:"prevButton",type:"button",class:e.cx("prevButton"),"aria-label":o.prevButtonAriaLabel,tabindex:o.$pcTabs.tabindex,onClick:t[0]||(t[0]=function(){return o.onPrevButtonClick&&o.onPrevButtonClick.apply(o,arguments)})},e.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(v(),_(I(o.templates.previcon||"ChevronLeftIcon"),g({"aria-hidden":"true"},e.ptm("prevIcon")),null,16))],16,Ut)),[[l]]):C("",!0),s("div",g({ref:"content",class:e.cx("content"),onScroll:t[1]||(t[1]=function(){return o.onScroll&&o.onScroll.apply(o,arguments)}),"data-p":o.dataP},e.ptm("content")),[s("div",g({ref:"tabs",class:e.cx("tabList"),role:"tablist","aria-orientation":o.$pcTabs.orientation||"horizontal"},e.ptm("tabList")),[$(e.$slots,"default"),s("span",g({ref:"inkbar",class:e.cx("activeBar"),role:"presentation","aria-hidden":"true"},e.ptm("activeBar")),null,16)],16,Ot)],16,Ft),o.showNavigators&&r.isNextButtonEnabled?k((v(),y("button",g({key:1,ref:"nextButton",type:"button",class:e.cx("nextButton"),"aria-label":o.nextButtonAriaLabel,tabindex:o.$pcTabs.tabindex,onClick:t[2]||(t[2]=function(){return o.onNextButtonClick&&o.onNextButtonClick.apply(o,arguments)})},e.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(v(),_(I(o.templates.nexticon||"ChevronRightIcon"),g({"aria-hidden":"true"},e.ptm("nextIcon")),null,16))],16,jt)),[[l]]):C("",!0)],16,Kt)}nt.render=Rt;var Mt={root:function(t){var n=t.instance,i=t.props;return["p-tab",{"p-tab-active":n.active,"p-disabled":i.disabled}]}},Wt=S.extend({name:"tab",classes:Mt}),qt={name:"BaseTab",extends:P,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Wt,provide:function(){return{$pcTab:this,$parentInstance:this}}},D={name:"Tab",extends:qt,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(t){switch(t.code){case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowRightKey:function(t){var n=this.findNextTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onHomeKey(t),t.preventDefault()},onArrowLeftKey:function(t){var n=this.findPrevTab(t.currentTarget);n?this.changeFocusedTab(t,n):this.onEndKey(t),t.preventDefault()},onHomeKey:function(t){var n=this.findFirstTab();this.changeFocusedTab(t,n),t.preventDefault()},onEndKey:function(t){var n=this.findLastTab();this.changeFocusedTab(t,n),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.findLastTab()),t.preventDefault()},onPageUpKey:function(t){this.scrollInView(this.findFirstTab()),t.preventDefault()},onEnterKey:function(t){this.changeActiveValue()},findNextTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n?t:t.nextElementSibling;return i?z(i,"data-p-disabled")||z(i,"data-pc-section")==="activebar"?this.findNextTab(i):M(i,'[data-pc-name="tab"]'):null},findPrevTab:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n?t:t.previousElementSibling;return i?z(i,"data-p-disabled")||z(i,"data-pc-section")==="activebar"?this.findPrevTab(i):M(i,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(t,n){ut(n),this.scrollInView(n)},scrollInView:function(t){var n;t==null||(n=t.scrollIntoView)===null||n===void 0||n.call(t,{block:"nearest"})}},computed:{active:function(){var t;return et((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},ariaControls:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},attrs:function(){return g(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Y({active:this.active})}},directives:{ripple:X}};function Ht(e,t,n,i,r,o){var l=tt("ripple");return e.asChild?$(e.$slots,"default",{key:1,dataP:o.dataP,class:at(e.cx("root")),active:o.active,a11yAttrs:o.a11yAttrs,onClick:o.onClick}):k((v(),_(I(e.as),g({key:0,class:e.cx("root"),"data-p":o.dataP,onClick:o.onClick},o.attrs),{default:p(function(){return[$(e.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[l]])}D.render=Ht;var Gt={root:"p-tabpanels"},Qt=S.extend({name:"tabpanels",classes:Gt}),Zt={name:"BaseTabPanels",extends:P,props:{},style:Qt,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},ot={name:"TabPanels",extends:Zt,inheritAttrs:!1};function Jt(e,t,n,i,r,o){return v(),y("div",g({class:e.cx("root"),role:"presentation"},e.ptmi("root")),[$(e.$slots,"default")],16)}ot.render=Jt;var Xt={root:function(t){var n=t.instance;return["p-tabpanel",{"p-tabpanel-active":n.active}]}},Yt=S.extend({name:"tabpanel",classes:Xt}),te={name:"BaseTabPanel",extends:P,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:Yt,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},E={name:"TabPanel",extends:te,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var t;return et((t=this.$pcTabs)===null||t===void 0?void 0:t.d_value,this.value)},id:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var t;return"".concat((t=this.$pcTabs)===null||t===void 0?void 0:t.$id,"_tab_").concat(this.value)},attrs:function(){return g(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var t;return{id:this.id,tabindex:(t=this.$pcTabs)===null||t===void 0?void 0:t.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function ee(e,t,n,i,r,o){var l,a;return o.$pcTabs?(v(),y(Z,{key:1},[e.asChild?$(e.$slots,"default",{key:1,class:at(e.cx("root")),active:o.active,a11yAttrs:o.a11yAttrs}):(v(),y(Z,{key:0},[!((l=o.$pcTabs)!==null&&l!==void 0&&l.lazy)||o.active?k((v(),_(I(e.as),g({key:0,class:e.cx("root")},o.attrs),{default:p(function(){return[$(e.$slots,"default")]}),_:3},16,["class"])),[[ct,(a=o.$pcTabs)!==null&&a!==void 0&&a.lazy?!0:o.active]]):C("",!0)],64))],64)):$(e.$slots,"default",{key:0})}E.render=ee;const ae=bt("settings",{state:()=>({settings:{},loading:!1,error:null}),actions:{async fetchSettings(){this.loading=!0,this.error=null;try{const{get:e}=J(),t=await e("/settings");t.success&&t.data&&(this.settings=t.data)}catch(e){this.error="Failed to fetch settings",console.error(e)}finally{this.loading=!1}},async updateSettings(e){this.loading=!0;try{const{post:t}=J();(await t("/settings",{settings:e})).success&&(this.settings={...this.settings,...e})}catch(t){throw this.error="Failed to update settings",t}finally{this.loading=!1}}}}),se={class:"category-management"},ne={class:"flex justify-between items-center mb-4"},oe={class:"flex items-center gap-2"},ie={key:1},re={class:"flex gap-1"},le={class:"flex flex-col gap-4 pt-4"},de={class:"field"},ue={class:"field"},ce={class:"field"},be={class:"field"},pe={class:"field"},fe=U({__name:"CategoryManagement",setup(e){const t=kt(),n=pt(),i=q(),r=W(()=>t.categories),o=W(()=>t.loading),l=w(!1),a=w(null),c=w({name:"",slug:"",description:"",color:"",icon:""}),f=()=>{a.value=null,c.value={name:"",slug:"",description:"",color:"#3B82F6",icon:"file"},l.value=!0},A=h=>{a.value=h,c.value={name:h.name,slug:h.slug,description:h.description||"",color:h.color||"#3B82F6",icon:h.icon||"file"},l.value=!0},O=async()=>{try{const h={...c.value,color:c.value.color?.startsWith("#")?c.value.color:`#${c.value.color}`};console.log("Saving category with data:",h),a.value?(await t.updateCategory(a.value.id,h),i.add({severity:"success",summary:"Succès",detail:"Catégorie mise à jour",life:3e3})):(await t.createCategory(h),i.add({severity:"success",summary:"Succès",detail:"Catégorie créée",life:3e3})),l.value=!1}catch(h){console.error("Error saving category:",h),i.add({severity:"error",summary:"Erreur",detail:"Impossible de sauvegarder la catégorie",life:3e3})}},j=h=>{n.require({message:`Voulez-vous vraiment supprimer la catégorie "${h.name}" ?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{await t.deleteCategory(h.id),i.add({severity:"success",summary:"Succès",detail:"Catégorie supprimée",life:3e3})}catch{i.add({severity:"error",summary:"Erreur",detail:"Impossible de supprimer la catégorie (peut-être utilisée par des documents)",life:3e3})}}})};return F(()=>{t.fetchCategories()}),(h,b)=>{const N=H("font-awesome-icon"),G=wt;return v(),y("div",se,[s("div",ne,[b[7]||(b[7]=s("h3",{class:"text-lg font-semibold"},"Gestion des Catégories",-1)),d(u(x),{label:"Nouvelle catégorie",onClick:f},{icon:p(()=>[d(N,{icon:"plus",class:"mr-2"})]),_:1})]),d(u(Tt),{value:r.value,loading:o.value,class:"p-datatable-sm"},{default:p(()=>[d(u(T),{field:"name",header:"Nom"}),d(u(T),{field:"description",header:"Description"}),d(u(T),{header:"Couleur",style:{width:"100px"}},{body:p(({data:m})=>[s("div",oe,[m.color?(v(),y("div",{key:0,style:ft({backgroundColor:m.color}),class:"w-6 h-6 rounded border border-gray-300"},null,4)):C("",!0),s("span",null,mt(m.color||"-"),1)])]),_:1}),d(u(T),{header:"Icône",style:{width:"100px"}},{body:p(({data:m})=>[m.icon?(v(),_(N,{key:0,icon:m.icon,class:"text-xl"},null,8,["icon"])):(v(),y("span",ie,"-"))]),_:1}),d(u(T),{header:"Actions",style:{width:"120px"}},{body:p(({data:m})=>[s("div",re,[k((v(),_(u(x),{text:"",rounded:"",severity:"info",size:"small",onClick:it=>A(m)},{icon:p(()=>[d(N,{icon:"pen"})]),_:1},8,["onClick"])),[[G,"Modifier",void 0,{top:!0}]]),k((v(),_(u(x),{text:"",rounded:"",severity:"danger",size:"small",onClick:it=>j(m)},{icon:p(()=>[d(N,{icon:"trash"})]),_:1},8,["onClick"])),[[G,"Supprimer",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"]),d(u(vt),{visible:l.value,"onUpdate:visible":b[6]||(b[6]=m=>l.value=m),header:a.value?"Modifier la catégorie":"Nouvelle catégorie",modal:!0,style:{width:"500px"}},{footer:p(()=>[d(u(x),{label:"Annuler",text:"",onClick:b[5]||(b[5]=m=>l.value=!1)}),d(u(x),{label:a.value?"Mettre à jour":"Créer",onClick:O,loading:u(t).loading},null,8,["label","loading"])]),default:p(()=>[s("div",le,[s("div",de,[b[8]||(b[8]=s("label",{for:"name",class:"block text-sm font-medium mb-2"},"Nom *",-1)),d(u(K),{id:"name",modelValue:c.value.name,"onUpdate:modelValue":b[0]||(b[0]=m=>c.value.name=m),class:"w-full"},null,8,["modelValue"])]),s("div",ue,[b[9]||(b[9]=s("label",{for:"slug",class:"block text-sm font-medium mb-2"},"Slug *",-1)),d(u(K),{id:"slug",modelValue:c.value.slug,"onUpdate:modelValue":b[1]||(b[1]=m=>c.value.slug=m),class:"w-full"},null,8,["modelValue"])]),s("div",ce,[b[10]||(b[10]=s("label",{for:"description",class:"block text-sm font-medium mb-2"},"Description",-1)),d(u(Vt),{id:"description",modelValue:c.value.description,"onUpdate:modelValue":b[2]||(b[2]=m=>c.value.description=m),rows:"3",class:"w-full"},null,8,["modelValue"])]),s("div",be,[b[11]||(b[11]=s("label",{for:"color",class:"block text-sm font-medium mb-2"},"Couleur",-1)),d(u(Bt),{modelValue:c.value.color,"onUpdate:modelValue":b[3]||(b[3]=m=>c.value.color=m),format:"hex",class:"w-full"},null,8,["modelValue"])]),s("div",pe,[b[12]||(b[12]=s("label",{for:"icon",class:"block text-sm font-medium mb-2"},"Icône (FontAwesome)",-1)),d(Ct,{modelValue:c.value.icon,"onUpdate:modelValue":b[4]||(b[4]=m=>c.value.icon=m)},null,8,["modelValue"])])])]),_:1},8,["visible","header"])])}}}),me={class:"p-6 border border-surface-border rounded-lg bg-surface-50 dark:bg-surface-800"},ve={class:"flex flex-col gap-4"},he={class:"field"},ge={class:"field"},ye={class:"flex justify-end mt-6 pt-4"},xe={class:"mt-8 pt-6 border-t border-surface-border"},$e=U({__name:"DocumentSettings",setup(e){const t=ae(),n=q(),i=W(()=>t.loading),r=w({document_base_path:"documents",document_naming_convention:"{original_name}"});F(async()=>{await t.fetchSettings(),t.settings&&(r.value={document_base_path:t.settings.document_base_path||"documents",document_naming_convention:t.settings.document_naming_convention||"{original_name}"})});const o=async()=>{try{await t.updateSettings(r.value),n.add({severity:"success",summary:"Succès",detail:"Paramètres sauvegardés",life:3e3,icon:"check"})}catch{n.add({severity:"error",summary:"Erreur",detail:"Impossible de sauvegarder les paramètres",life:3e3,icon:"times"})}};return(l,a)=>{const c=H("font-awesome-icon");return v(),y("div",me,[a[6]||(a[6]=s("h2",{class:"text-xl font-semibold mb-4 flex items-center gap-2 text-color"},[s("i",{class:"pi pi-file text-blue-500"}),B(" Module Documents ")],-1)),s("div",ve,[s("div",he,[a[2]||(a[2]=s("label",{for:"basePath",class:"block text-sm font-medium mb-2 text-color-secondary"}," Chemin de base (sur le serveur) ",-1)),d(u(K),{id:"basePath",modelValue:r.value.document_base_path,"onUpdate:modelValue":a[0]||(a[0]=f=>r.value.document_base_path=f),placeholder:"ex: documents",class:"w-full"},null,8,["modelValue"]),a[3]||(a[3]=s("small",{class:"text-color-secondary"},"Dossier où seront stockés les fichiers (relatif à storage/app/public)",-1))]),s("div",ge,[a[4]||(a[4]=s("label",{for:"namingConvention",class:"block text-sm font-medium mb-2 text-color-secondary"}," Convention de nommage ",-1)),d(u(K),{id:"namingConvention",modelValue:r.value.document_naming_convention,"onUpdate:modelValue":a[1]||(a[1]=f=>r.value.document_naming_convention=f),placeholder:"ex: {date}_{original_name}",class:"w-full"},null,8,["modelValue"]),a[5]||(a[5]=s("small",{class:"text-color-secondary"}," Variables disponibles: {original_name}, {date}, {timestamp} ",-1))])]),s("div",ye,[d(u(x),{label:"Enregistrer les modifications",onClick:o,loading:i.value},{icon:p(()=>[d(c,{icon:"save",class:"mr-2"})]),_:1},8,["loading"])]),s("div",xe,[d(fe)])])}}}),_e={class:"p-6 border border-surface-border rounded-lg bg-surface-50 dark:bg-surface-800"},we={class:"text-xl font-semibold mb-4 flex items-center gap-2 text-color"},ke={class:"flex flex-col gap-6"},Te={class:"field-checkbox flex items-center gap-2"},Ve={key:0,class:"field"},Be={class:"border-t border-surface-border pt-4"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"field"},Pe={class:"field"},Ae={class:"field"},Ne={class:"field"},Le={class:"field"},ze={class:"flex justify-end mt-6 pt-4 border-t border-surface-border"},De=U({__name:"NotificationSettings",setup(e){const t=ht(),n=q(),i=w(!1),r=w({email_enabled:!0,email_time:new Date(0,0,0,8,0,0),alert_thresholds:{action:3,equipment:7,document:30,training:7,planning:1}});F(async()=>{if(await t.fetchSettings(),t.settings){const[l,a]=t.settings.email_time.split(":").map(Number);r.value={email_enabled:t.settings.email_enabled,email_time:new Date(0,0,0,l,a,0),alert_thresholds:{action:t.settings.alert_thresholds.action??3,equipment:t.settings.alert_thresholds.equipment??7,document:t.settings.alert_thresholds.document??30,training:t.settings.alert_thresholds.training??7,planning:t.settings.alert_thresholds.planning??1}}}});const o=async()=>{i.value=!0;try{const l=r.value.email_time instanceof Date?`${String(r.value.email_time.getHours()).padStart(2,"0")}:${String(r.value.email_time.getMinutes()).padStart(2,"0")}:00`:r.value.email_time;await t.updateSettings({email_enabled:r.value.email_enabled,email_time:l,alert_thresholds:r.value.alert_thresholds}),n.add({severity:"success",summary:"Succès",detail:"Paramètres enregistrés",life:3e3})}catch(l){console.log(l),n.add({severity:"error",summary:"Erreur",detail:"Erreur lors de l'enregistrement",life:3e3})}finally{i.value=!1}};return(l,a)=>{const c=H("font-awesome-icon");return v(),y("div",_e,[s("h2",we,[d(c,{icon:["fas","bell"],class:"text-blue-500"}),a[7]||(a[7]=B(" Module Notifications ",-1))]),s("div",ke,[s("div",Te,[d(u(St),{id:"email_enabled",modelValue:r.value.email_enabled,"onUpdate:modelValue":a[0]||(a[0]=f=>r.value.email_enabled=f),binary:!0},null,8,["modelValue"]),a[8]||(a[8]=s("label",{for:"email_enabled",class:"font-medium text-color-secondary"},"Recevoir le résumé quotidien par email",-1))]),r.value.email_enabled?(v(),y("div",Ve,[a[9]||(a[9]=s("label",{for:"email_time",class:"block text-sm font-medium text-color-secondary mb-1"},"Heure d'envoi",-1)),d(u($t),{modelValue:r.value.email_time,"onUpdate:modelValue":a[1]||(a[1]=f=>r.value.email_time=f),updateModelType:"string",showIcon:"",fluid:"",iconDisplay:"input",timeOnly:"",inputId:"email_time"},{inputicon:p(()=>[d(c,{icon:["fas","clock"]})]),_:1},8,["modelValue"]),a[10]||(a[10]=s("small",{class:"text-color-secondary"},"L'heure à laquelle vous souhaitez recevoir le récapitulatif.",-1))])):C("",!0),s("div",Be,[a[16]||(a[16]=s("h3",{class:"text-lg font-semibold mb-4 text-color"},"Seuils d'alerte (jours avant échéance)",-1)),s("div",Ce,[s("div",Se,[a[11]||(a[11]=s("label",{for:"action_threshold",class:"block text-sm font-medium text-color-secondary mb-1"},"Actions",-1)),d(u(V),{id:"action_threshold",modelValue:r.value.alert_thresholds.action,"onUpdate:modelValue":a[2]||(a[2]=f=>r.value.alert_thresholds.action=f),showButtons:"",min:1,max:30,suffix:" jours",class:"w-full"},null,8,["modelValue"])]),s("div",Pe,[a[12]||(a[12]=s("label",{for:"equipment_threshold",class:"block text-sm font-medium text-color-secondary mb-1"},"Équipements",-1)),d(u(V),{id:"equipment_threshold",modelValue:r.value.alert_thresholds.equipment,"onUpdate:modelValue":a[3]||(a[3]=f=>r.value.alert_thresholds.equipment=f),showButtons:"",min:1,max:60,suffix:" jours",class:"w-full"},null,8,["modelValue"])]),s("div",Ae,[a[13]||(a[13]=s("label",{for:"document_threshold",class:"block text-sm font-medium text-color-secondary mb-1"},"Documents (Expiration)",-1)),d(u(V),{id:"document_threshold",modelValue:r.value.alert_thresholds.document,"onUpdate:modelValue":a[4]||(a[4]=f=>r.value.alert_thresholds.document=f),showButtons:"",min:1,max:90,suffix:" jours",class:"w-full"},null,8,["modelValue"])]),s("div",Ne,[a[14]||(a[14]=s("label",{for:"training_threshold",class:"block text-sm font-medium text-color-secondary mb-1"},"Formations",-1)),d(u(V),{id:"training_threshold",modelValue:r.value.alert_thresholds.training,"onUpdate:modelValue":a[5]||(a[5]=f=>r.value.alert_thresholds.training=f),showButtons:"",min:1,max:30,suffix:" jours",class:"w-full"},null,8,["modelValue"])]),s("div",Le,[a[15]||(a[15]=s("label",{for:"planning_threshold",class:"block text-sm font-medium text-color-secondary mb-1"},"Planning (Visites/Causeries)",-1)),d(u(V),{id:"planning_threshold",modelValue:r.value.alert_thresholds.planning,"onUpdate:modelValue":a[6]||(a[6]=f=>r.value.alert_thresholds.planning=f),showButtons:"",min:1,max:14,suffix:" jours",class:"w-full"},null,8,["modelValue"])])])]),s("div",ze,[d(u(x),{label:"Enregistrer les modifications",onClick:o,loading:i.value},{icon:p(()=>[d(c,{icon:"save",class:"mr-2"})]),_:1},8,["loading"])])])])}}}),Ee={class:"p-4"},Ie={class:"card"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4"},Ue={class:"p-6 border border-surface-border rounded-lg bg-surface-50 dark:bg-surface-800"},Fe={class:"flex items-center justify-between"},Oe={class:"p-6 border border-red-200 dark:border-red-800 rounded-lg bg-red-50 dark:bg-red-900/20"},je={class:"flex items-center justify-between"},ia=U({__name:"SettingsPage",setup(e){const t=gt(),n=w(!1),i=()=>{t.toggleTheme(),n.value=t.theme==="dark"},r=()=>{localStorage.clear(),window.location.reload()};return F(()=>{n.value=t.theme==="dark"}),(o,l)=>(v(),y("div",Ee,[l[8]||(l[8]=s("h1",{class:"text-2xl font-bold text-color mb-6"},"Paramètres",-1)),s("div",Ie,[d(u(st),{value:"0"},{default:p(()=>[d(u(nt),null,{default:p(()=>[d(u(D),{value:"0"},{default:p(()=>[...l[1]||(l[1]=[B("Général",-1)])]),_:1}),d(u(D),{value:"1"},{default:p(()=>[...l[2]||(l[2]=[B("Documents",-1)])]),_:1}),d(u(D),{value:"2"},{default:p(()=>[...l[3]||(l[3]=[B("Notifications",-1)])]),_:1})]),_:1}),d(u(ot),null,{default:p(()=>[d(u(E),{value:"0"},{default:p(()=>[s("div",Ke,[s("div",Ue,[l[5]||(l[5]=s("h2",{class:"text-xl font-semibold mb-4 text-color"},"Apparence",-1)),s("div",Fe,[l[4]||(l[4]=s("div",{class:"flex flex-col"},[s("span",{class:"font-medium text-color"},"Thème sombre"),s("span",{class:"text-sm text-color-secondary"},"Activer le mode sombre pour l'application")],-1)),d(u(yt),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),onChange:i},null,8,["modelValue"])])]),s("div",Oe,[l[7]||(l[7]=s("h2",{class:"text-xl font-semibold mb-4 text-red-600 dark:text-red-400"},"Zone de danger",-1)),s("div",je,[l[6]||(l[6]=s("div",{class:"flex flex-col"},[s("span",{class:"font-medium text-red-700 dark:text-red-300"},"Vider le cache"),s("span",{class:"text-sm text-red-500 dark:text-red-400"},"Effacer le cache local de l'application")],-1)),d(u(x),{label:"Vider le cache",severity:"danger",outlined:"",onClick:r})])])])]),_:1}),d(u(E),{value:"1"},{default:p(()=>[d($e)]),_:1}),d(u(E),{value:"2"},{default:p(()=>[d(De)]),_:1})]),_:1})]),_:1})])]))}});export{ia as default};
