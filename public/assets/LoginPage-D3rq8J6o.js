import{s as C}from"./index-DK5WICtn.js";import{d as F,G as L,h as d,c as B,b as a,w as t,u as r,a as e,m as f,p as u,e as _,t as g,s as E,r as I,bi as M,y as N,o as n}from"./index-d7axL_xv.js";import{s as V}from"./index-B5RzIAVk.js";import{h as j,s as $,a as q,b as A}from"./index-D2J_AaRN.js";import{s as R}from"./index-DZQqA5uS.js";import{o as T,s as v}from"./schemas-C8kxHR-7.js";const D={class:"flex items-center justify-center h-screen"},G={class:"flex items-center gap-4 pb-8 text-primary"},H={class:"flex flex-col gap-6 w-full"},P={class:"flex flex-col gap-2 w-full"},Q={class:"flex flex-col gap-2 w-full"},J={class:"flex flex-col gap-2 w-full"},ee=F({__name:"LoginPage",setup(K){const x=N(),w=L(),i=d(!1),c=d(""),b=j(T({email:v().min(1,{message:"L'email est requis."}).email("Format d'email invalide."),password:v().min(1,{message:"Le mot de passe est requis."})})),y=async o=>{if(o.valid){i.value=!0,c.value="";const s=await w.login({email:o.values.email||"",password:o.values.password||""});i.value=!1,s.success?x.push("/"):c.value=s.message||"Identifiants incorrects"}};return(o,s)=>{const k=R,m=q,p=V,S=I("font-awesome-icon"),h=E,z=C;return n(),B("div",D,[a(z,{class:"px-6 py-20 md:px-20 lg:px-80"},{title:t(()=>[e("div",G,[a(M,{size:"64"}),s[0]||(s[0]=e("div",{class:"flex flex-col justify-center leading-none"},[e("span",{class:"text-2xl font-bold text-color"},"FRAISSE & FILS"),e("span",{class:"text-xl text-primary font-bold tracking-wider"},"QHSE Manager")],-1))])]),content:t(()=>[a(r($),{resolver:r(b),onSubmit:y},{default:t(l=>[e("div",H,[e("div",P,[a(m,{variant:"on"},{default:t(()=>[a(k,{name:"email",id:"email",type:"email",size:"large",class:"w-full",fluid:""}),s[1]||(s[1]=e("label",{for:"email"},"Email",-1))]),_:1}),l.email?.invalid?(n(),f(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[_(g(l.email.error.message),1)]),_:2},1024)):u("",!0)]),e("div",Q,[a(m,{variant:"on"},{default:t(()=>[a(r(A),{id:"password",name:"password",size:"large",toggleMask:!0,feedback:!1,"input-class":"w-full",fluid:""}),s[2]||(s[2]=e("label",{for:"password"},"Mot de passe",-1))]),_:1}),l.password?.invalid?(n(),f(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[_(g(l.password.error.message),1)]),_:2},1024)):u("",!0)]),e("div",J,[a(h,{label:"Connexion",type:"submit",size:"large",fluid:"",class:"w-full",loading:i.value},{icon:t(()=>[a(S,{icon:["fas","sign-in-alt"],class:"mr-2"})]),_:1},8,["loading"])])])]),_:1},8,["resolver"])]),_:1})])}}});export{ee as default};
