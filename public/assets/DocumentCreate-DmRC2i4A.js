import{d as _,g as v,h as g,c as x,a as o,b as r,w as a,u as m,s as y,r as w,y as h,o as S}from"./index-oOuEsLBu.js";import{u as b}from"./documents-BDxgjJlF.js";import{_ as D}from"./DocumentForm.vue_vue_type_script_setup_true_lang-DEOh21zj.js";import{s as C}from"./index-CO5Pw-j-.js";import"./index-IzGGsCUm.js";import"./index-CFLhIysZ.js";import"./index-B0RCps1L.js";import"./index-kYhIjE44.js";import"./index-D25kfrV8.js";import"./index-DHPOKPzk.js";import"./index-Bsb9bHmP.js";import"./index-DGkmfP6q.js";import"./index-DsZb2wqs.js";import"./index-XG19fh9S.js";import"./index-CsNlQH77.js";import"./index-D2qS9a38.js";import"./index-C1JXx-aU.js";import"./index-CYWC0yQY.js";import"./category-B4VxuJds.js";import"./schemas-C8kxHR-7.js";const k={class:"p-4"},B={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-2 gap-4"},E={class:"flex items-center gap-4"},W=_({__name:"DocumentCreate",setup(T){const s=h(),p=b(),i=v(),n=g(!1),d=async t=>{n.value=!0;try{const e=new FormData;if(e.append("title",t.title),e.append("description",t.description??""),t.document_folder_id&&e.append("document_folder_id",t.document_folder_id.toString()),t.category_id&&e.append("category_id",t.category_id.toString()),e.append("version",t.version),e.append("status",t.status),t.expires_date){const f=new Date(t.expires_date).toISOString().split("T")[0];e.append("expires_date",f??"")}t.file&&e.append("file",t.file),await p.createDocument(e),i.add({severity:"success",summary:"Succès",detail:"Document créé avec succès",life:3e3,icon:"check"}),s.push("/documents")}catch(e){console.error("Erreur lors de la création du document:",e),i.add({severity:"error",summary:"Erreur",detail:"Impossible de créer le document",life:3e3,icon:"times"})}finally{n.value=!1}},l=()=>{s.push("/documents")},u=()=>{s.back()};return(t,e)=>{const c=w("font-awesome-icon");return S(),x("div",k,[o("div",B,[o("div",E,[r(m(y),{text:"",rounded:"",severity:"secondary",onClick:u},{icon:a(()=>[r(c,{icon:"arrow-left"})]),_:1}),e[0]||(e[0]=o("div",null,[o("div",{class:"flex items-center gap-3"},[o("h2",{class:"text-color"},"Créer un nouveau document")])],-1))])]),r(m(C),null,{content:a(()=>[r(D,{submitButtonText:"Enregistrer",loading:n.value,onSubmit:d,onCancel:l},null,8,["loading"])]),_:1})])}}});export{W as default};
